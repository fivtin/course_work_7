# Курсовая работа 7 - DRF

В 2018 году Джеймс Клир написал книгу «Атомные привычки», которая посвящена приобретению новых полезных привычек и искоренению старых плохих привычек. Заказчик прочитал книгу, впечатлился и обратился к вам с запросом реализовать трекер полезных привычек.
В рамках учебного курсового проекта реализована бэкенд-часть SPA веб-приложения.

При регистрации пользователь, помимо обязательных полей __"email"__ и __"password"__ может также передать поле __"tgm_id"__ с своим идентификатором в Telegram. В этом случае привычки, в которых указано время выполнения (параметр __"when"__) при наступление этого времени будут присылаться ботом в мессенджере Telegram.

Далее указанные параметры "email" и "password" используются для получения токена доступа.

Токен передается в заголовках запросов с именем 'Authorization': 'Bearer {access_token}' и необходим для доступа ко всем запросам работы с данными "Habit (Привычка)".

Необходимые поля для запросов можно посмотреть в докумментации по ссылкам ниже.

## Запуск сервиса
1. Установите зависимости
2. В каталоге __config__ проекта создайте файл ___.env___ (или переименуйте __.env-sample__) и установите необходимые значения переменных.
3. Выполните миграции командой: ___python3 manage.py migrate___
4. Загрузите данные в БД командой __python3 manage.py loaddata data.json__
5. Запустите сервер командой ___python3 manage.py runserver___
6. В отдельных окнах терминала выполните команды
    - __celery -A config worker -l INFO__ [-P eventlet] - дополнительный параметр для Windows
    - __celery -A config beat -l INFO__

* Для пользователя __user@example.com__ с ID=2 будет установлен __"tgm_id"__ указанный в .env файле под параметром __TELEGRAM_CHAT_ID__.  

### Основные URL
- [POST] http://127.0.0.1:8000/users/register/ - регистрация пользователя
- [POST] http://127.0.0.1:8000/users/token/ - получение JWT токена
- [GET] http://127.0.0.1:8000/habits/ - получение списка своих привычек /для авторизованных пользователей/
- [GET] http://127.0.0.1:8000/habits/{id}/ - получение информации о конкретной привычке /для авторизованных пользователей/
- [GET] http://127.0.0.1:8000/habits/public/ - получение списка всех публичных привычек /для авторизованных пользователей/
- [POST] http://127.0.0.1:8000/habits/create/ - добавление привычки /для авторизованных пользователей/
- [PATCH] http://127.0.0.1:8000/habits/{id}/update/ - peдактирование привычки /для авторизованных пользователей/
- [DELETE] http://127.0.0.1:8000/habits/{id}/delete/ - удаление привычки /для авторизованных пользователей/
- http://127.0.0.1:8000/docs/, http://127.0.0.1:8000/swagger/, http://127.0.0.1:8000/redoc/ - документация для API
